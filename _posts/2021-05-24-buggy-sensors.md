---
title: Про томати та про глючні датчики
date: 2021-05-24 16:20:00 +03:00
---

На жаль, мої датчики вологості ґрунту показують чортзна-що.

Всі три паростки томату знаходяться в однакових горщиках. Ґрунт в них з одного пакету. Освітлення та температура більш-менш співпадають. Поливаю я їх одночасно.

Цілком ймовірно, що вологість ґрунту в горщиках не повинна помітно відрізнятися.

```sql
SELECT
  MIN(created_at) as dt,
  TRUNCATE(AVG(A0), 2) AS avg_A0,
  TRUNCATE(AVG(A1), 2) AS avg_A1,
  TRUNCATE(AVG(A2), 2) AS avg_A2,
  TRUNCATE(AVG(1/(LOG(1/(1023/A5-1))/3950+1/298.15)-273.15), 2) AS t_C
FROM sensor
GROUP BY UNIX_TIMESTAMP(created_at) DIV 3600;
```

| dt                  | avg_A0 | avg_A1 | avg_A2 | t_C    |
|---------------------|--------|--------|--------|--------|
| 2021-05-23 12:52:57 | 444.21 | 478.50 | 607.66 | 22.20 |
| 2021-05-23 13:00:05 | 449.55 | 527.11 | 597.92 | 23.08 |
| 2021-05-23 14:00:03 | 379.31 | 433.65 | 496.25 | 23.01 |
| 2021-05-23 15:00:05 | 304.60 | 369.09 | 474.64 | 22.63 |
| 2021-05-23 16:00:02 | 309.42 | 557.87 | 493.38 | 22.44 |
| 2021-05-23 17:00:00 | 312.08 | 948.28 | 522.05 | 22.16 |
| 2021-05-23 18:00:08 | 313.12 | 955.83 | 520.70 | 21.66 |
| 2021-05-23 19:00:09 | 313.84 | 963.94 | 518.88 | 21.32 |
| 2021-05-23 20:00:07 | 314.57 | 967.70 | 517.70 | 20.83 |
| 2021-05-23 21:00:04 | 315.81 | 970.96 | 517.07 | 20.47 |
| 2021-05-23 22:00:02 | 317.52 | 974.37 | 516.11 | 19.85 |
| 2021-05-23 23:00:00 | 318.98 | 978.75 | 514.11 | 18.56 |
| 2021-05-24 00:00:08 | 320.92 | 979.29 | 513.22 | 17.68 |
| 2021-05-24 01:00:06 | 322.83 | 980.06 | 513.40 | 17.88 |
| 2021-05-24 02:00:04 | 317.97 | 985.18 | 511.65 | 16.42 |
| 2021-05-24 03:00:02 | 318.64 | 984.66 | 511.35 | 16.44 |
| 2021-05-24 04:00:00 | 319.30 | 986.26 | 511.72 | 16.55 |
| 2021-05-24 05:00:08 | 319.80 | 988.95 | 510.95 | 15.87 |
| 2021-05-24 06:00:06 | 320.67 | 989.77 | 510.35 | 15.34 |
| 2021-05-24 07:00:04 | 321.52 | 990.65 | 510.10 | 15.17 |
| 2021-05-24 08:00:02 | 322.59 | 991.05 | 509.93 | 14.94 |
| 2021-05-24 09:00:09 | 323.60 | 988.79 | 510.79 | 15.42 |
| 2021-05-24 10:00:07 | 325.10 | 985.74 | 512.54 | 15.72 |
| 2021-05-24 11:00:05 | 321.57 | 984.88 | 514.15 | 16.52 |
| 2021-05-24 12:00:03 | 310.59 | 984.39 | 514.57 | 17.30 |
| 2021-05-24 13:00:01 | 311.65 | 985.36 | 516.48 | 18.29 |
| 2021-05-24 14:00:09 | 312.59 | 993.14 | 515.44 | 18.41 |
| 2021-05-24 15:00:07 | 314.12 | 996.19 | 514.63 | 18.40 |
| 2021-05-24 16:00:05 | 315.54 | 996.52 | 514.68 | 18.73 |

Показники датчика A1 зіпсувалися вчора ввечері близько 17:00. Для датчиків цього типу такі значення нереальні і свідчать про несправність.

Датчик A2 я замінив на самому початку експерименту, бо цифра 600 мені здалася зависокою. Новий датчик став показувати більш правдоподібні значення та навіть відреагував на полив. Але близько 17:00 його показники теж стали якимось дивними.


Полив томатів
-------------

Вчора я досить рясно поливав всі томати, але точно не пам'ятаю, коли саме (можливо, десь після 14:00, бо я перевіряв роботу датчиків). Вчора ввечері ґрунт у горщиках був трохи вологий.

Сьогодні, приблизно о 11:45, я трохи полив всі три горщика. Датчик A0 відреагував адекватно, два інших датчики не відреагували взагалі.


Заміна, тестування та калібрування
----------------------------------

Колись я читав, що NASA витрачає дуже багато часу та зусиль на тестування. Космічні апарати зазвичай мають своїх «двійників», що лишаються в лабораторіях. На цих тестових стендах у будь-який момент можна перевірити, наприклад, як відпрацює будь-яка потенційно ризикована команда.

Балкон — не космос, але робити щось з дротами та макетними платами на балконі досить незручно. Відчуваю, що мені треба мати іншу плату з Arduino для розробки, для проведення експериментів і, врешті-решт, для перевірки та калібрування датчиків.

На щастя, у мене достатньо плат Arduino та макетних плат.


Рухи томатів
------------

Тим часом томати рухаються, щодня реагують на сонце. Сподіваюсь, пересадка їм не дуже зашкодила, та сподіваюсь, що їм там на балконі не холодно.

Веб-камера «Шваброскопа 1.0» дає зображення лише 640×480. Це небагато, але рух роздивитись можна.

```sh
c=0; for f in `ls *.jpg`; do cp $f fr/$c.jpg; c=`expr $c + 1`; done
ffmpeg -framerate 10 -i fr/%d.jpg -c:v libvpx -qmin 0 -qmax 50 -crf 25 plant.webm
ffmpeg -framerate 10 -i fr/%d.jpg -c:v libx264 -pix_fmt yuv420p -crf 25 plant.mp4
```

<video width="640" style="max-width: 100%" poster="plant.jpg" controls>
  <source src="plant.mp4" type="video/mp4; codecs=h264">
  <source src="plant.webm" type="video/webm; codecs=vp8">
  <a href="plant.mp4">Відео.</a>
</video>
